\hypertarget{_thread_pool_8cpp_source}{}\doxysection{Thread\+Pool.\+cpp}
\label{_thread_pool_8cpp_source}\index{D:/Documents/Final/Mandelbrot\_Cpp\_Final/src/ThreadPool.cpp@{D:/Documents/Final/Mandelbrot\_Cpp\_Final/src/ThreadPool.cpp}}
\mbox{\hyperlink{_thread_pool_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_thread_pool_8h}{ThreadPool.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00003}\mbox{\hyperlink{class_thread_pool_aedd843c3e9758cf001137884c8b5f219}{00003}} \mbox{\hyperlink{class_thread_pool_aedd843c3e9758cf001137884c8b5f219}{ThreadPool::ThreadPool}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} numThreads) : queues(numThreads), count(numThreads)}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00005}00005   \textcolor{keywordflow}{if} (!numThreads)}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00006}00006   \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00007}00007     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"{}thread count must be nonzero!\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00008}00008   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (numThreads < 0) \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00009}00009     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"{}thread count must be positive! how did this happen??"{}});}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00010}00010   \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00012}00012   \textcolor{keyword}{auto} worker = [\textcolor{keyword}{this}] (\textcolor{keyword}{auto} i) \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00013}00013     \textcolor{keywordflow}{while} (\textcolor{keyword}{true})}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00014}00014     \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00015}00015       \mbox{\hyperlink{class_thread_pool_af0bd900e7e9b68e59bba6e892254e879}{process}} proc;}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00016}00016       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} j = 0; j < \mbox{\hyperlink{class_thread_pool_ae2964ed8247aa43dd092461ac37e7aaa}{count}} * \mbox{\hyperlink{class_thread_pool_a9326b3e24cdecf9d9a9aed78eecf2b62}{countMult}}; j++)}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00017}00017       \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00018}00018         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_thread_pool_a30c5829b3d679337b9c6483406bdbbfa}{queues}}[(i + j) \% \mbox{\hyperlink{class_thread_pool_ae2964ed8247aa43dd092461ac37e7aaa}{count}}].try\_pop(proc))}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00019}00019         \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00020}00020           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00022}00022       \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00023}00023       \textcolor{keywordflow}{if} (!proc \&\& !\mbox{\hyperlink{class_thread_pool_a30c5829b3d679337b9c6483406bdbbfa}{queues}}[i].pop(proc))}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00024}00024       \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00025}00025         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00026}00026       \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00027}00027       proc();}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00028}00028     \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00029}00029   \};}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00031}00031   \mbox{\hyperlink{class_thread_pool_a0880895adaacfea1e563354212cb1345}{threads}}.reserve(numThreads);}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00033}00033   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} i = 0; i < numThreads; i++)}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00034}00034   \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00035}00035     \mbox{\hyperlink{class_thread_pool_a0880895adaacfea1e563354212cb1345}{threads}}.emplace\_back(worker, i);}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00036}00036   \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00037}00037 \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00039}\mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{00039}} \mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{ThreadPool::\string~ThreadPool}}()}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00040}00040 \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00041}00041   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& \mbox{\hyperlink{class_unbounded_queue}{queue}}: \mbox{\hyperlink{class_thread_pool_a30c5829b3d679337b9c6483406bdbbfa}{queues}})}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00042}00042   \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00043}00043     \mbox{\hyperlink{class_unbounded_queue}{queue}}.\mbox{\hyperlink{class_unbounded_queue_a3b156091dea7956e979290c4a326d405}{unblock}}();}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00044}00044   \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00045}00045   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& thread : \mbox{\hyperlink{class_thread_pool_a0880895adaacfea1e563354212cb1345}{threads}})}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00046}00046   \{}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00047}00047     thread.join();}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00048}00048   \}}
\DoxyCodeLine{\Hypertarget{_thread_pool_8cpp_source_l00049}00049 \}}

\end{DoxyCode}
