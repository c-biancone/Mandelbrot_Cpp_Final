\hypertarget{main_8cpp}{}\doxysection{D\+:/\+Documents/\+Final/\+Mandelbrot\+\_\+\+Cpp\+\_\+\+Final/src/main.cpp File Reference}
\label{main_8cpp}\index{D:/Documents/Final/Mandelbrot\_Cpp\_Final/src/main.cpp@{D:/Documents/Final/Mandelbrot\_Cpp\_Final/src/main.cpp}}
{\ttfamily \#include \char`\"{}PPM.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Colorization.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Mandelbrot.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Thread\+Pool.\+h\char`\"{}}\newline
{\ttfamily \#include $<$chrono$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
Include dependency graph for main.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}} ()
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}\label{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{main.cpp@{main.cpp}!main@{main}}
\index{main@{main}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{main_8cpp_source_l00012}{12}} of file \mbox{\hyperlink{main_8cpp_source}{main.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00013}00013 \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00014}00014   \textcolor{keywordtype}{int} width;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00015}00015   \textcolor{keywordtype}{int} height;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00016}00016 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00017}00017   \textcolor{comment}{// set up input handling to prevent creation of image with distortion for}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00018}00018   \textcolor{comment}{// given default Mandelbrot parameters}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00019}00019   \textcolor{keywordtype}{bool} invalidInput = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00020}00020   \textcolor{keywordflow}{while} (invalidInput)}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00021}00021   \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00022}00022     cout << \textcolor{stringliteral}{"{}Enter square image size in pixels:\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00023}00023     \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00024}00024     getline(cin, line);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00025}00025     istringstream is(line);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00026}00026 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00027}00027     \textcolor{keywordtype}{char} dummy;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00028}00028     \textcolor{keywordflow}{if} (!(is >> width) || (is >> ws \&\& is.get(dummy)) || !(width > 0))}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00029}00029     \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00030}00030       cout << \textcolor{stringliteral}{"{}Invalid input. Try again:\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00031}00031     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00032}00032       invalidInput = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00033}00033     \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00034}00034   \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00035}00035   height = width;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00036}00036 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00037}00037 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00038}00038   \textcolor{comment}{// handle invalid filename inputs}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00039}00039   \textcolor{keywordtype}{string} fileName;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00040}00040   \textcolor{keywordtype}{bool} invalidChar = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00041}00041   \textcolor{keywordflow}{while} (invalidChar)}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00042}00042   \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00043}00043     cout << \textcolor{stringliteral}{"{}Enter output file name in the form 'name.ppm':\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00044}00044     cin >> fileName;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00045}00045     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keywordtype}{char} c : fileName)}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00046}00046     \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00047}00047       \textcolor{keywordflow}{if} (!isalnum(c) \&\& !ispunct(c))}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00048}00048       \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00049}00049         cout << \textcolor{stringliteral}{"{}Invalid character found. Try again:\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00050}00050         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00051}00051       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00052}00052         invalidChar = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00053}00053         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00054}00054       \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00055}00055     \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00056}00056   \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00057}00057 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00058}00058   \textcolor{keyword}{auto} begin = chrono::steady\_clock::now();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00059}00059 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00060}00060   \textcolor{comment}{// set up image stream for writing}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00061}00061   \mbox{\hyperlink{class_p_p_m}{PPM}} pgm(fileName, width, height);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00062}00062   \textcolor{comment}{// PPM pgm(width, height); // for testing}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00063}00063   \textcolor{keywordflow}{if} (!pgm.init\_stream())}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00064}00064   \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00065}00065     cout << \textcolor{stringliteral}{"{}Could not open ofstream for image\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00066}00066     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00067}00067   \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00068}00068   pgm.write\_header();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00069}00069 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00070}00070   \textcolor{comment}{// set up container for image row data}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00071}00071   vector<unsigned char> row\{\}; \textcolor{comment}{// array needs compile-\/time const length}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00072}00072   row.resize(width * 3); \textcolor{comment}{// avoid constant resizing by allocating up front}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00073}00073 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00074}00074   cout << \textcolor{stringliteral}{"{}Rendering row by row:\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00075}00075 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00076}00076   \textcolor{comment}{// using basic constructor since I only want this image}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00077}00077   \textcolor{comment}{// call member functions here to set specific parameters}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00078}00078   \mbox{\hyperlink{class_mandelbrot}{Mandelbrot}} gigabrot(width, height);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00079}00079   cout << gigabrot;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00080}00080 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00081}00081   \textcolor{comment}{// unsigned int numThreads = thread::hardware\_concurrency();}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00082}00082   \textcolor{comment}{// cout << "{}numThreads: "{} << numThreads << "{}\(\backslash\)n"{};}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00083}00083 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00084}00084   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} pY = 0; pY < height; pY++)}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00085}00085   \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00086}00086     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} pX = 0; pX < width; pX++)}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00087}00087     \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00088}00088       \textcolor{keywordtype}{size\_t} subPixel = 3 * pX;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00089}00089       gigabrot.current\_pixel(pX, pY);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00090}00090       gigabrot.get\_c();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00091}00091       gigabrot.iterate();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00092}00092       row[subPixel + 2] = row[subPixel + 1] = row[subPixel] =}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00093}00093           gigabrot.colorize\_bw();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00094}00094       gigabrot.reset();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00095}00095     \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00096}00096     \{}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00097}00097       \textcolor{comment}{// implemented due to possibility of having huge image, keep memory usage low}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00098}00098       \textcolor{comment}{// might be causing the issues with parallelization, ruining the embarrassingly parallel}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00099}00099       \textcolor{comment}{// aspect of the Mandelbrot set}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00100}00100       pgm.write\_row(row);}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00101}00101     \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00102}00102   \}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00103}00103 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00104}00104   pgm.close();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00105}00105 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00106}00106   \textcolor{keyword}{auto} end = chrono::steady\_clock::now();}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00107}00107   cout << \textcolor{stringliteral}{"{}Time elapsed: "{}}}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00108}00108        << \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(chrono::duration\_cast<chrono::milliseconds>}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00109}00109            (end -\/ begin).count()) / 1000.F}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00110}00110        << \textcolor{stringliteral}{"{} sec\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00111}00111 }
\DoxyCodeLine{\Hypertarget{main_8cpp_l00112}00112   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{main_8cpp_l00113}00113 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph}
\end{center}
\end{figure}
